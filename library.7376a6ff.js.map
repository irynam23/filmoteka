{"mappings":"8gBAKMA,EAAYC,SAASC,cAAc,gBACnCC,EAAaF,SAASC,cAAc,wBACpCE,EAAWH,SAASC,cAAc,sBAEpCG,EAAa,GAkCjB,SAASC,EAAoBC,GAC3B,IAAMC,EAASD,EACZE,KAAI,SAAAC,GACH,MAAO,oCAIDC,OAJqCD,EAAME,GAAG,qFASRD,OALtCD,EAAME,GACP,yIAQ0BD,OAJaD,EAAMG,YAAY,kGAKjCF,OADED,EAAMI,MAAM,4CAIzCH,QA0CsBI,EA7C0BL,EAAMM,OA8CtDC,EAAaF,EAAYN,KAAI,SAAAS,G,OAASA,EAAMC,I,IAC3CF,EAAWG,OAAS,EAAIH,EAAWI,MAAM,EAAG,GAAKJ,GA/CYK,KAC1D,MACA,OAEyBX,OAD7BD,EAAMa,aAAaC,MAAM,KAAK,GAC/B,gCAA4Db,OAA9BD,EAAMe,aAAaC,QAAQ,GAAG,8BAyCnE,IAA8BX,EACtBE,C,IAvCHK,KAAK,IACRtB,EAAU2B,mBAAmB,YAAanB,GAClBP,SAAS2B,iBAAiB,uBAClCC,SAAQ,SAAAC,GACtBA,EAAIC,iBAAiB,QAASC,E,IAIlC,SAASA,EAAMC,GACb,IAAMC,EAAUC,OAAOF,EAAEG,OAAOC,QAAQzB,IAExC,OADA0B,QAAQC,IAAIL,GACJ7B,GACN,IAAK,UACHL,EAAUwC,UAAY,GACtB,IACMC,EADgBC,KAAKC,MAAMC,aAAaC,QAAQ,YACtBC,QAAO,SAAAC,G,OAAKA,EAAFnC,KAAgBsB,C,IAG1D,GAFAI,QAAQC,IAAIE,GACZG,aAAaI,QAAQ,UAAWN,KAAKO,UAAUR,KAC1CA,EAAUrB,OACb,OAAO8B,EAAAC,OAAOC,KAAK,oBAErB9C,EAAoBmC,GACpB,MACF,IAAK,QACHzC,EAAUwC,UAAY,GACtB,IACMa,EADcX,KAAKC,MAAMC,aAAaC,QAAQ,UACtBC,QAAO,SAAAC,G,OAAKA,EAAFnC,KAAgBsB,C,IAExD,GADAU,aAAaI,QAAQ,QAASN,KAAKO,UAAUI,KACxCA,EAAUjC,OACb,OAAO8B,EAAAC,OAAOC,KAAK,oBAErB9C,EAAoB+C,G,CAvF1BlD,EAAW4B,iBAAiB,SAQ5B,WACE1B,EAAa,UACbiD,EAAAC,QAAQC,WACRF,EAAAC,QAAQE,OAAO,KACfzD,EAAUwC,UAAY,GACtB,IAAMkB,EAAgBhB,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,GACrE,IAAKa,EAActC,OACjB,OAAO8B,EAAAC,OAAOC,KAAK,oBAErB9C,EAAoBoD,E,IAhBtBtD,EAAS2B,iBAAiB,SAmB1B,WACE1B,EAAa,QACbiD,EAAAC,QAAQC,WACRF,EAAAC,QAAQE,OAAO,KACfzD,EAAUwC,UAAY,GACtB,IAAMmB,EAAcjB,KAAKC,MAAMC,aAAaC,QAAQ,WAAa,GACjE,IAAKc,EAAYvC,OACf,OAAO8B,EAAAC,OAAOC,KAAK,oBAErB9C,EAAoBqD,E,IA1BlBC,OAAOC,SAASC,SAClB3D,EAAW4D,QACX5D,EAAW6D,Q","sources":["src/js/library.js"],"sourcesContent":["import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\n\nconst cardsList = document.querySelector('.cards__list');\nconst watchedBtn = document.querySelector('.filter-watched__btn');\nconst queueBtn = document.querySelector('.filter-queue__btn');\n// const cardsRemoveItem = document.querySelector('.cards__remove-item');\nlet currentTab = '';\n\nwatchedBtn.addEventListener('click', renderWatched);\nqueueBtn.addEventListener('click', renderQueue);\n\nif (window.location.pathname === '/library.html' || '/project/library.html') {\n  watchedBtn.focus();\n  watchedBtn.click();\n}\n\nfunction renderWatched() {\n  currentTab = 'watched';\n  Loading.standard();\n  Loading.remove(800);\n  cardsList.innerHTML = '';\n  const watchedMovies = JSON.parse(localStorage.getItem('watched')) || [];\n  if (!watchedMovies.length) {\n    return Notify.info('No added movies!');\n  }\n  renderMarkupLibrary(watchedMovies);\n}\n\nfunction renderQueue() {\n  currentTab = 'queue';\n  Loading.standard();\n  Loading.remove(800);\n  cardsList.innerHTML = '';\n  const queueMovies = JSON.parse(localStorage.getItem('queue')) || [];\n  if (!queueMovies.length) {\n    return Notify.info('No added movies!');\n  }\n  renderMarkupLibrary(queueMovies);\n}\n\nfunction renderMarkupLibrary(movies) {\n  const markup = movies\n    .map(movie => {\n      return `<li class=\"cards__item\" data-id=\"${movie.id}\">\n\n     \n          <button type=\"submit\" class=\"cards__remove-item\" data-id=\"${\n            movie.id\n          }\">-</button>\n      <img\n            class=\"cards__photo\"\n            alt=\"movie\"\n            src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\"\n            \n            loading=\"lazy\"\n          />\n          <h3 class=\"cards__title\">${movie.title}</h3>\n          <p class=\"cards__info\">${getGenresNameLibrary(movie.genres).join(\n            ', '\n          )} | ${\n        movie.release_date.split('-')[0]\n      } <span class=\"cards__vote\"> ${movie.vote_average.toFixed(1)}</span></p>\n        </li>`;\n    })\n    .join('');\n  cardsList.insertAdjacentHTML('beforeend', markup);\n  const cardsRemoveItem = document.querySelectorAll('.cards__remove-item');\n  cardsRemoveItem.forEach(btn => {\n    btn.addEventListener('click', onBtn);\n  });\n}\n\nfunction onBtn(e) {\n  const movieId = Number(e.target.dataset.id);\n  console.log(movieId);\n  switch (currentTab) {\n    case 'watched':\n      cardsList.innerHTML = '';\n      const watchedMovies = JSON.parse(localStorage.getItem('watched'));\n      const filteredW = watchedMovies.filter(({ id }) => id !== movieId);\n      console.log(filteredW);\n      localStorage.setItem('watched', JSON.stringify(filteredW));\n      if (!filteredW.length) {\n        return Notify.info('No added movies!');\n      }\n      renderMarkupLibrary(filteredW);\n      break;\n    case 'queue':\n      cardsList.innerHTML = '';\n      const queueMovies = JSON.parse(localStorage.getItem('queue'));\n      const filteredQ = queueMovies.filter(({ id }) => id !== movieId);\n      localStorage.setItem('queue', JSON.stringify(filteredQ));\n      if (!filteredQ.length) {\n        return Notify.info('No added movies!');\n      }\n      renderMarkupLibrary(filteredQ);\n      break;\n    default:\n      break;\n  }\n}\n\nfunction getGenresNameLibrary(movieGenres) {\n  const genresName = movieGenres.map(genre => genre.name);\n  return genresName.length > 2 ? genresName.slice(0, 2) : genresName;\n}\n"],"names":["$93effc6fc56091ad$var$cardsList","document","querySelector","$93effc6fc56091ad$var$watchedBtn","$93effc6fc56091ad$var$queueBtn","$93effc6fc56091ad$var$currentTab","$93effc6fc56091ad$var$renderMarkupLibrary","movies","markup","map","movie","concat","id","poster_path","title","movieGenres","genres","genresName","genre","name","length","slice","join","release_date","split","vote_average","toFixed","insertAdjacentHTML","querySelectorAll","forEach","btn","addEventListener","$93effc6fc56091ad$var$onBtn","e","movieId","Number","target","dataset","console","log","innerHTML","filteredW","JSON","parse","localStorage","getItem","filter","param","setItem","stringify","$h6c0i","Notify","info","filteredQ","$7rQOT","Loading","standard","remove","watchedMovies","queueMovies","window","location","pathname","focus","click"],"version":3,"file":"library.7376a6ff.js.map"}